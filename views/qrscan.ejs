<h1>QR Code Reader</h1>
  <div id="video-container">
    <video id="video-preview"></video>
  </div>
  <div id="scan-results"></div>

  <script>
    // Frontend JavaScript

        const video = document.getElementById('video-preview');
        const captureButton = document.getElementById('capture-button');

        // Request access to the webcam
        navigator.mediaDevices.getUserMedia({ video: true })
        .then((stream) => {
            video.srcObject = stream;
        })
        .catch((error) => {
            console.error('Error accessing webcam:', error);
        });

        // Capture button click event
        captureButton.addEventListener('click', () => {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        const imageData = canvas.toDataURL('image/png');

        // Send the captured image data to the server
        fetch('/scan', {
            method: 'POST',
            headers: {
            'Content-Type': 'application/json',
            },
            body: JSON.stringify({ imageData }),
        })
            .then((response) => {
            if (response.ok) {
                console.log('Image sent successfully!');
                // Do something with the response
            } else {
                console.error('Failed to send the image.');
            }
            })
            .catch((error) => {
            console.error('Error sending the image:', error);
            });
        });

  </script>
